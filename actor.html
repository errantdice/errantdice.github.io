<!DOCTYPE html>
<html lang="en">
<head id="common">
    <!-- Meta Information -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title id="title"></title>
    
    <!-- CDN Min JavaScript -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" 
            integrity="sha384-vk5WoKIaW/vJyUAd9n/wmopsmNhiy+L2Z+SBxGYnUkunIxVxAv/UtMOhba/xskxh" crossorigin="anonymous"></script>

    <!-- Shared Javascript -->
    <!-- Dependent on JQuery 3.4.1 -->
    <script>
        $.get("common.html", function(data) {
            var html = $($.parseHTML(data,true))
            var dom
            dom = $($.parseHTML(data,true)).find("#title").get(0).outerHTML
            $("#title").replaceWith(dom)
            dom = $($.parseHTML(data,true)).find("#popper").get(0).outerHTML
            $("#popper").replaceWith(dom)
            dom = $($.parseHTML(data,true)).find("#bootstrap").get(0).outerHTML
            $("#popper").replaceWith(dom)
        })
    </script>
    <script id="popper"></script>
    <script id="bootstrap"></script>

    <!-- Header-Footer -->
    <script>
        $.get("header.html", function(data) {
            $("#header").replaceWith(data);
        });
    </script>
    <script>
        $.get("footer.html", function(data) {
            $("#footer").replaceWith(data);
        });
    </script>
    
    <!-- Temp Script Function -->
    <script>
        var url = "/data/index.json"
//        var folder
        $.get(url, function(data) {
            var folder
            debugger
            for (var i=0; i<(data.children.length); i++) {
                var child = data.children[i]
                var name = child.name
                var type = child.type
                if (name == "actors") {
                    debugger
                    folder = data.children[i]
                }
            }
            var path
            for (var i=0; i<folder.children.length; i++) {
                debugger
                path = "/data/" + folder.name + "/" + folder.children[i].name
                $.getJSON(path, function(result) {
                    html = "<button type=\"button\" class=\"btn\">"
                    html = html + (result.name)
                    html = html + "</button>"
                    $("#index").after(html)
                })
            }
        })
    </script>
    <!-- Temp Script Function -->
    <script>
        // url to json file containing actor data
        var url
        
        // TODO Rename Function. Refactor into either common.js or actor.js
        // Posibly Refactor to not rely on GET query
        /**
         * Locates the .json file associated with the GET query. 
         */
        function foo() {
//            debugger
            var query = window.location.search.substring(1).split("&")
            var pairs = new Map()
            for (var i=0; i<query.length; i++) {
                var pair = query[i].split("=")
                pairs.set(pair[0],pair[1])
            }
            var folder = "/data/actors/"
            var name = pairs.get("name")
            if (name != null) {
                name = folder.concat(name)
                name = name.concat(".json")
                url = name
            }
        }
        foo()
        
        /**
         * Fills in the actor.html page with the data from the .json file holding the actor's data
         */
        $.get(url, function(data) {
//            debugger
            $("#name").replaceWith(data.name)
            $("#myth").replaceWith(data.myth)
        })
    </script>
</head>
<body>
    <!-- Header Section -->
    <div id="header"></div>
    
    <!-- Content Section -->
    <div class="container-fluid">
        <div id="index"></div>
    </div>
    <div class="container-fluid">
        <div id="name"></div>
        <div id="myth"></div>
    </div>
    <!-- Footer Section -->
    <div id="footer"></div>
</body>
</html>